<div class="container">
    <div class="layout-between header-row">
      <h1>Dashboard de Documentos</h1>
     
    </div>

    <div class="dash-actions">
      <button class="btn-filter" [ngClass]="
          !selectedFilter ? 'btn-filter--active' : 'btn-filter--inactive'
        " (click)="onFilterChange()">
        <p class="filter-label">Todos</p>
      </button>

      <button class="btn-filter" [ngClass]="
          selectedFilter === 'PROCESSING'
            ? 'btn-filter--active'
            : 'btn-filter--inactive'
        " (click)="onFilterChange('PROCESSING')">
        <p class="filter-label">Processando</p>
      </button>

      <button class="btn-filter" [ngClass]="
          selectedFilter === 'COMPLETED'
            ? 'btn-filter--active'
            : 'btn-filter--inactive'
        " (click)="onFilterChange('COMPLETED')">
        <p class="filter-label">Pronto</p>
      </button>

      <button class="btn-filter" [ngClass]="
          selectedFilter === 'FAILED'
            ? 'btn-filter--active'
            : 'btn-filter--inactive'
        " (click)="onFilterChange('FAILED')">
        <p class="filter-label">Erro</p>
      </button>

      <button class="btn-filter" [ngClass]="
          selectedFilter === 'PENDING'
            ? 'btn-filter--active'
            : 'btn-filter--inactive'
        " (click)="onFilterChange('PENDING')">
        <p class="filter-label">Pendente</p>
      </button>
    </div>

    <div class="table-root">
      <div class="overflow-x-auto">
        <table class="table" matSort (matSortChange)="onSortChange($event)" matSortActive="uploadDate"
          matSortDirection="desc">
          <thead>
            <tr class="table-head ">
              <th class="table-th">Nome do Arquivo</th>
            <th class="table-th" mat-sort-header="type">
              Tipo
            </th>
            <th class="table-th" mat-sort-header="uploadDate">
              Data de Upload
            </th>

            <th class="table-th">Status</th>
              <th class="table-th">Ações</th>
            </tr>
          </thead>

          <tbody>
            @for (document of documents; track document.id) {
            <tr class="table-row">
              <td class="file-cell">
                <mat-icon [ngClass]="{
                    'icon-red': document.icon === 'picture_as_pdf',
                    'icon-blue': document.icon === 'description',
                    'icon-orange':
                      document.icon !== 'picture_as_pdf' &&
                      document.icon !== 'description'
                  }">
                  {{ document.icon }}
                </mat-icon>
                <span class="file-name">{{ document.name }}</span>
              </td>

              <td class="table-td">
                {{ document.type | fileType }}
              </td>

              <td class="table-td">
                {{ document.uploadDate | date : 'dd/MM/yyyy HH:mm' }}
              </td>

              <td class="table-td">
                <span [ngClass]="getStatusClass(document.status)">
                  {{ translateStatus(document.status) }}
                </span>
              </td>

              <td class="table-td">
                <a
                  class="action-link"
                  [routerLink]="isChatAvailable(document.status) ? ['/chat', document.id] : null"
                  [class.disabled]="!isChatAvailable(document.status)"
                  aria-label="Abrir chat"
                  [title]="isChatAvailable(document.status) ? 'Abrir chat' : 'Chat disponível apenas para documentos prontos'"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="icon-chat">
                    <path
                      d="M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"
                      fill="currentColor" />
                  </svg>
                </a>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>

    <mat-paginator [length]="totalElements" [pageSize]="size" [pageSizeOptions]="[5, 10, 25]"
      (page)="onPageChange($event)">
    </mat-paginator>
  </div>
</div>